<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>对图片处理的优化手段</title>
  <style>
  body{width:100%}body:after,body:before{content:"";display:table}body:after{clear:both}a,abbr,acronym,address,applet,big,blockquote,body,caption,cite,code,dd,del,dfn,div,dl,dt,em,fieldset,form,h1,h2,h3,h4,h5,h6,html,iframe,img,ins,kbd,label,legend,li,object,ol,p,pre,q,s,samp,small,span,strike,strong,sub,sup,table,tbody,td,tfoot,th,thead,tr,tt,ul,var{margin:0;padding:0;border:0;outline:0;font-weight:inherit;font-style:inherit;font-family:inherit;font-size:100%;vertical-align:baseline}body{line-height:1;color:#000;background:#fff}ol,ul{list-style:none}table{border-collapse:separate;border-spacing:0;vertical-align:middle}caption,td,th{text-align:left;font-weight:400;vertical-align:middle}a img{border:none}button,input{margin:0;padding:0}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}@font-face{font-family:FontAwesome;font-style:normal;font-weight:400;src:url(fonts/fontawesome-webfont.eot?v=#4.0.3);src:url(fonts/fontawesome-webfont.eot?#iefix&v=#4.0.3) format("embedded-opentype"),url(fonts/fontawesome-webfont.woff?v=#4.0.3) format("woff"),url(fonts/fontawesome-webfont.ttf?v=#4.0.3) format("truetype"),url(fonts/fontawesome-webfont.svg#fontawesomeregular?v=#4.0.3) format("svg")}#container,body,html{height:100%}body{background:#fff;font:14px "Helvetica Neue",Helvetica,Arial,sans-serif;-webkit-text-size-adjust:100%}.outer{max-width:1220px;margin:0 auto;padding:0 20px}.outer:after,.outer:before{content:"";display:table}.outer:after{clear:both}.inner{display:inline;float:left;width:98.33333333333333%;margin:0 .833333333333333%}.alignleft,.left{float:left}.alignright,.right{float:right}.clear{clear:both}#container{position:relative}.mobile-nav-on{overflow:hidden}#wrap{height:100%;width:100%;position:absolute;top:0;left:0;-webkit-transition:.2s ease-out;-moz-transition:.2s ease-out;-ms-transition:.2s ease-out;transition:.2s ease-out;z-index:1;background:#fff}.mobile-nav-on #wrap{left:280px}@media screen and (min-width:768px){#main{display:inline;float:left;width:73.33333333333333%;margin:0 .833333333333333%}}.archive-year,.article-category-link,.article-date,.widget-title{text-decoration:none;text-transform:uppercase;letter-spacing:2px;color:#999;margin-bottom:1em;margin-left:5px;line-height:1em;text-shadow:0 1px #fff;font-weight:700}.article-inner{background:#fff;-webkit-box-shadow:1px 2px 3px #ddd;box-shadow:1px 2px 3px #ddd;border:1px solid #ddd;border-radius:3px}.article-entry h1,.widget h1{font-size:2em}.article-entry h2,.widget h2{font-size:1.5em}.article-entry h3,.widget h3{font-size:1.3em}.article-entry h4,.widget h4{font-size:1.2em}.article-entry h5,.widget h5{font-size:1em}.article-entry h6,.widget h6{font-size:1em;color:#999}.article-entry hr,.widget hr{border:1px dashed #ddd}.article-entry strong,.widget strong{font-weight:700}.article-entry cite,.article-entry em,.widget cite,.widget em{font-style:italic}.article-entry sub,.article-entry sup,.widget sub,.widget sup{font-size:.75em;line-height:0;position:relative;vertical-align:baseline}.article-entry sup,.widget sup{top:-.5em}.article-entry sub,.widget sub{bottom:-.2em}.article-entry small,.widget small{font-size:.85em}.article-entry abbr,.article-entry acronym,.widget abbr,.widget acronym{border-bottom:1px dotted}.article-entry dl,.article-entry ol,.article-entry ul,.widget dl,.widget ol,.widget ul{margin:0 20px;line-height:1.6em}.article-entry ol ol,.article-entry ol ul,.article-entry ul ol,.article-entry ul ul,.widget ol ol,.widget ol ul,.widget ul ol,.widget ul ul{margin-top:0;margin-bottom:0}.article-entry ul,.widget ul{list-style:disc}.article-entry ol,.widget ol{list-style:decimal}.article-entry dt,.widget dt{font-weight:700}#header{height:300px;position:relative;border-bottom:1px solid #ddd}#header:after,#header:before{content:"";position:absolute;left:0;right:0;height:40px}#header:before{top:0;background:-webkit-linear-gradient(rgba(0,0,0,.2),transparent);background:-moz-linear-gradient(rgba(0,0,0,.2),transparent);background:-ms-linear-gradient(rgba(0,0,0,.2),transparent);background:linear-gradient(rgba(0,0,0,.2),transparent)}#header:after{bottom:0;background:-webkit-linear-gradient(transparent,rgba(0,0,0,.2));background:-moz-linear-gradient(transparent,rgba(0,0,0,.2));background:-ms-linear-gradient(transparent,rgba(0,0,0,.2));background:linear-gradient(transparent,rgba(0,0,0,.2))}#header-outer{height:100%;position:relative}#header-inner{position:relative;overflow:hidden}#banner{position:absolute;top:0;left:0;width:100%;height:100%;background:url(banner-url) center #000;-webkit-background-size:cover;-moz-background-size:cover;background-size:cover;z-index:-1}#header-title{text-align:center;height:40px;position:absolute;top:50%;left:0;margin-top:-20px}#logo,#subtitle{text-decoration:none;color:#fff;font-weight:300;text-shadow:0 1px 4px rgba(0,0,0,.3)}#logo{font-size:40px;line-height:40px;letter-spacing:2px}#subtitle{font-size:16px;line-height:16px;letter-spacing:1px}#subtitle-wrap{margin-top:16px}#main-nav{float:left;margin-left:-15px}.main-nav-link,.nav-icon{float:left;color:#fff;opacity:.6;text-decoration:none;text-shadow:0 1px rgba(0,0,0,.2);-webkit-transition:opacity .2s;-moz-transition:opacity .2s;-ms-transition:opacity .2s;transition:opacity .2s;display:block;padding:20px 15px}.main-nav-link:hover,.nav-icon:hover{opacity:1}.nav-icon{font-family:FontAwesome;text-align:center;font-size:14px;width:14px;height:14px;padding:20px 15px;position:relative;cursor:pointer}.main-nav-link{font-weight:300;letter-spacing:1px}@media screen and (max-width:479px){.main-nav-link{display:none}}#main-nav-toggle{display:none}#main-nav-toggle:before{content:"\f0c9"}@media screen and (max-width:479px){#main-nav-toggle{display:block}}#sub-nav{float:right;margin-right:-15px}#nav-rss-link:before{content:"\f09e"}#nav-search-btn:before{content:"\f002"}#search-form-wrap{position:absolute;top:15px;width:150px;height:30px;right:-150px;opacity:0;-webkit-transition:.2s ease-out;-moz-transition:.2s ease-out;-ms-transition:.2s ease-out;transition:.2s ease-out}#search-form-wrap.on{opacity:1;right:0}@media screen and (max-width:479px){#search-form-wrap{width:100%;right:-100%}}.search-form{position:absolute;top:0;left:0;right:0;background:#fff;padding:5px 15px;border-radius:15px;-webkit-box-shadow:0 0 10px rgba(0,0,0,.3);box-shadow:0 0 10px rgba(0,0,0,.3)}.search-form-input{border:none;background:0 0;color:#555;width:100%;font:13px "Helvetica Neue",Helvetica,Arial,sans-serif;outline:0}.search-form-input::-webkit-search-cancel-button,.search-form-input::-webkit-search-results-decoration{-webkit-appearance:none}.search-form-submit{position:absolute;top:50%;right:10px;margin-top:-7px;font:13px FontAwesome;border:none;background:0 0;color:#bbb;cursor:pointer}.search-form-submit:focus,.search-form-submit:hover{color:#777}.article{margin:80px 0}.article-inner{overflow:hidden}.article-meta{padding-top:10px}.article-meta:after,.article-meta:before{content:"";display:table}.article-meta:after{clear:both}.article-date{float:left}.article-category{float:left;line-height:1em;color:#ccc;text-shadow:0 1px #fff;margin-left:8px}.article-category:before{content:"\2022"}.article-category-link{margin:0 12px 1em}.article-header{padding:20px 20px 0}.article-title{text-decoration:none;font-size:2em;font-weight:700;color:#000;line-height:1.1em;-webkit-transition:color .2s;-moz-transition:color .2s;-ms-transition:color .2s;transition:color .2s}a.article-title:hover{color:#103ffb}.article-entry{color:#555;padding:0 20px}.article-entry:after,.article-entry:before{content:"";display:table}.article-entry:after{clear:both}.article-entry p,.article-entry table{line-height:1.6em;margin:1.6em 0}.article-entry h1,.article-entry h2,.article-entry h3,.article-entry h4,.article-entry h5,.article-entry h6{font-weight:700}.article-entry h1,.article-entry h2,.article-entry h3,.article-entry h4,.article-entry h5,.article-entry h6{line-height:1.1em;margin:1.1em 0}.article-entry a{color:#103ffb;text-decoration:none}.article-entry a:hover{text-decoration:underline}.article-entry dl,.article-entry ol,.article-entry ul{margin-top:1.6em;margin-bottom:1.6em}.article-entry img,.article-entry video{max-width:100%;height:auto;display:block}s iframe{border:none}table{width:100%;border-collapse:collapse;border-spacing:0}th{font-weight:700;border-bottom:3px solid #ddd;padding-bottom:.5em}td{border-bottom:1px solid #ddd;padding:10px 0}blockquote{font-family:Microsoft YaHei;font-size:16px;font-style:italic;width:500px;margin:.25em 0;padding:0 10px;line-height:1.45;position:relative;color:#383838;border-left:3px solid #c1c1c1;background:#fff}.pullquote{text-align:left;width:45%;margin:0}.pullquote.left{margin-left:.5em;margin-right:1em}.pullquote.right{margin-right:.5em;margin-left:1em}.caption{color:#999;display:block;font-size:.9em;margin-top:.5em;position:relative;text-align:center}.video-container{position:relative;padding-top:56.25%;height:0;overflow:hidden}.video-container embed,.video-container iframe,.video-container object{position:absolute;top:0;left:0;width:100%;height:100%;margin-top:0}.article-more-link a{display:inline-block;line-height:1em;padding:6px 15px;border-radius:15px;background:#fff;color:#999;text-shadow:0 1px #fff;text-decoration:none}.article-more-link a:hover{background:#103ffb;color:#fff;text-decoration:none;text-shadow:0 1px #042dd2}.article-footer{font-size:.85em;line-height:1.6em;border-top:1px solid #ddd;padding-top:1.6em;margin:0 20px 20px}.article-footer:after,.article-footer:before{content:"";display:table}.article-footer:after{clear:both}.article-footer a{color:#999;text-decoration:none}.article-footer a:hover{color:#555}.article-tag-list{float:right;position:relative;font-size:12px;padding-top:5px}.article-tag-list:before{content:'\f02b';top:6px;left:-20px;position:absolute;font:1em FontAwesome}.article-tag-list-item{float:left;margin-right:10px}.article-tag-list-link:before{content:"#"}.article-tag-list-link:hover{color:#4c4cff;text-decoration:none}.article-comment-link{float:right}.article-comment-link:before{content:"\f075";font-family:FontAwesome;padding-right:8px}.article-share-link{cursor:pointer;float:right;margin-left:20px}.article-share-link:before{content:"\f064";font-family:FontAwesome;padding-right:6px}#article-nav{position:relative}#article-nav:after,#article-nav:before{content:"";display:table}#article-nav:after{clear:both}@media screen and (min-width:768px){#article-nav{margin:50px 0}#article-nav:before{width:8px;height:8px;position:absolute;top:50%;left:50%;margin-top:-4px;margin-left:-4px;content:"";border-radius:50%;background:#ddd;-webkit-box-shadow:0 1px 2px #fff;box-shadow:0 1px 2px #fff}}.article-nav-link-wrap{text-decoration:none;text-shadow:0 1px #fff;color:#999;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;margin-top:50px;text-align:center;display:block}.article-nav-link-wrap:hover{color:#555}@media screen and (min-width:768px){.article-nav-link-wrap{width:50%;margin-top:0}}@media screen and (min-width:768px){#article-nav-newer{float:left;text-align:right;padding-right:20px}}@media screen and (min-width:768px){#article-nav-older{float:right;text-align:left;padding-left:20px}}.article-nav-caption{text-transform:uppercase;letter-spacing:2px;color:#ddd;line-height:1em;font-weight:700}#article-nav-newer .article-nav-caption{margin-right:-2px}.article-nav-title{font-size:.85em;line-height:1.6em;margin-top:.5em}.article-share-box{position:absolute;display:none;background:#fff;-webkit-box-shadow:1px 2px 10px rgba(0,0,0,.2);box-shadow:1px 2px 10px rgba(0,0,0,.2);border-radius:3px;margin-left:-145px;overflow:hidden;z-index:1}.article-share-box.on{display:block}.article-share-input{width:100%;background:0 0;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;font:14px "Helvetica Neue",Helvetica,Arial,sans-serif;padding:0 15px;color:#555;outline:0;border:1px solid #ddd;border-radius:3px 3px 0 0;height:36px;line-height:36px}.article-share-links{background:#fff}.article-share-links:after,.article-share-links:before{content:"";display:table}.article-share-links:after{clear:both}.article-share-facebook,.article-share-google,.article-share-pinterest,.article-share-twitter{width:50px;height:36px;display:block;float:left;position:relative;color:#999;text-shadow:0 1px #fff}.article-share-facebook:before,.article-share-google:before,.article-share-pinterest:before,.article-share-twitter:before{font-size:20px;font-family:FontAwesome;width:20px;height:20px;position:absolute;top:50%;left:50%;margin-top:-10px;margin-left:-10px;text-align:center}.article-share-facebook:hover,.article-share-google:hover,.article-share-pinterest:hover,.article-share-twitter:hover{color:#fff}.article-share-twitter:before{content:"\f099"}.article-share-twitter:hover{background:#00aced;text-shadow:0 1px #008abe}.article-share-facebook:before{content:"\f09a"}.article-share-facebook:hover{background:#3b5998;text-shadow:0 1px #2f477a}.article-share-pinterest:before{content:"\f0d2"}.article-share-pinterest:hover{background:#cb2027;text-shadow:0 1px #a21a1f}.article-share-google:before{content:"\f0d5"}.article-share-google:hover{background:#dd4b39;text-shadow:0 1px #be3221}.article-gallery{background:#000;position:relative}.article-gallery-photos{position:relative;overflow:hidden}.article-gallery-img{display:none;max-width:100%}.article-gallery-img:first-child{display:block}.article-gallery-img.loaded{position:absolute;display:block}.article-gallery-img img{display:block;max-width:100%;margin:0 auto}#comments{background:#fff;-webkit-box-shadow:1px 2px 3px #ddd;box-shadow:1px 2px 3px #ddd;padding:20px;border:1px solid #ddd;border-radius:3px;margin:50px 0}#comments a{color:#103ffb}.archives-wrap{margin-top:110px!important;margin:50px 0}.archives:after,.archives:before{content:"";display:table}.archives:after{clear:both}.archive-year-wrap{margin-bottom:1em}.archives{-webkit-column-gap:10px;-moz-column-gap:10px;column-gap:10px}@media screen and (min-width:480px) and (max-width:767px){.archives{-webkit-column-count:1;-moz-column-count:1;column-count:1}}@media screen and (min-width:768px){.archives{-webkit-column-count:1;-moz-column-count:1;column-count:1}}.archive-title{color:#000;font-weight:400;margin-bottom:20px;text-shadow:0 0 1px #fff;font-size:1.5em}.archive-title:before{content:'\f02b';font-family:FontAwesome;padding-right:15px}.archive-article{-webkit-box-shadow:none;box-shadow:none;background:#fff}.archive-article-header .icon{width:32px;height:32px;margin-right:25px;position:absolute;top:20px;left:20px;color:#4c4cff}.archive-article-header .icon:before{content:'\f022';position:absolute;font:32px FontAwesome;top:0;left:0;width:32px;text-align:center}.archive-article-inner{padding:20px 20px 15px 77px;margin-bottom:0;position:relative}.archive-article-title{font-weight:400;font-size:1.8em}.archive-article-title a{color:#000;text-decoration:none}.archive-article-footer{margin-top:1em}.archive-article-date{text-decoration:none;color:#4c4cff}.archive-article-date:hover{text-decoration:underline;color:#4c4cff}#page-nav{margin:50px auto;background:#fff;-webkit-box-shadow:1px 2px 3px #ddd;box-shadow:1px 2px 3px #ddd;border:1px solid #ddd;border-radius:3px;text-align:center;color:#999;overflow:hidden}#page-nav:after,#page-nav:before{content:"";display:table}#page-nav:after{clear:both}#page-nav a,#page-nav span{padding:10px 20px;line-height:1;height:2ex}#page-nav a{color:#999;text-decoration:none}#page-nav a:hover{background:#999;color:#fff}#page-nav .prev{float:left}#page-nav .next{float:right}#page-nav .page-number{display:inline-block}@media screen and (max-width:479px){#page-nav .page-number{display:none}}#page-nav .current{color:#555;font-weight:700}#page-nav .space{color:#ddd}#footer{background:#262a30;padding:50px 0;border-top:1px solid #ddd;color:#999}#footer a{color:#103ffb;text-decoration:none}#footer a:hover{text-decoration:underline}#footer-info{line-height:1.6em;font-size:.85em}.article-entry .highlight,.article-entry pre{background:#fff;margin:10px 20px 10px;padding:15px 20px;border-style:solid;border-color:#ddd;border-width:1px 1px;overflow:auto;color:#000;line-height:22.400000000000002px}.article-entry .gist .gist-file .gist-data .line-numbers,.article-entry .highlight .gutter pre{color:#666;font-size:.85em}.article-entry code,.article-entry pre{font-family:"Source Code Pro",Consolas,Monaco,Menlo,Consolas,monospace}.article-entry code{background:#fff;text-shadow:0 1px #fff;padding:0 .3em}.article-entry pre code{background:0 0;text-shadow:none;padding:0}.article-entry .highlight pre{border:none;margin:0;padding:0}.article-entry .highlight table{margin:0;width:auto}.article-entry .highlight td{border:none;padding:0}.article-entry .highlight figcaption{font-size:.85em;color:#999;line-height:1em;margin-bottom:1em}.article-entry .highlight figcaption:after,.article-entry .highlight figcaption:before{content:"";display:table}.article-entry .highlight figcaption:after{clear:both}.article-entry .highlight figcaption a{float:right}.article-entry .highlight .gutter pre{text-align:right;padding-right:20px}.article-entry .highlight .line{height:22.400000000000002px}.article-entry .highlight .line.marked{background:#515151}.article-entry .gist{margin:0 -20px;border-style:solid;border-color:#ddd;border-width:1px 0;background:#fff;padding:15px 20px 15px 0}.article-entry .gist .gist-file{border:none;font-family:"Source Code Pro",Consolas,Monaco,Menlo,Consolas,monospace;margin:0}.article-entry .gist .gist-file .gist-data{background:0 0;border:none}.article-entry .gist .gist-file .gist-data .line-numbers{background:0 0;border:none;padding:0 20px 0 0}.article-entry .gist .gist-file .gist-data .line-data{padding:0!important}.article-entry .gist .gist-file .highlight{margin:0;padding:0;border:none}.article-entry .gist .gist-file .gist-meta{background:#fff;color:#999;font:.85em "Helvetica Neue",Helvetica,Arial,sans-serif;text-shadow:0 0;padding:0;margin-top:1em;margin-left:20px}.article-entry .gist .gist-file .gist-meta a{color:#103ffb;font-weight:400}.article-entry .gist .gist-file .gist-meta a:hover{text-decoration:underline}pre .comment,pre .title{color:#999}pre .attribute,pre .css .class,pre .css .id,pre .css .pseudo,pre .html .doctype,pre .regexp,pre .ruby .constant,pre .tag,pre .variable,pre .xml .doctype,pre .xml .pi,pre .xml .tag .title{color:#f2777a}pre .built_in,pre .constant,pre .literal,pre .number,pre .params,pre .preprocessor{color:#f99157}pre .class,pre .css .rules .attribute,pre .ruby .class .title{color:#9c9}pre .header,pre .inheritance,pre .ruby .symbol,pre .string,pre .value,pre .xml .cdata{color:#9c9}pre .css .hexcolor{color:#6cc}pre .coffeescript .title,pre .function,pre .javascript .title,pre .perl .sub,pre .python .decorator,pre .python .title,pre .ruby .function .title,pre .ruby .title .keyword{color:#69c}pre .javascript .function,pre .keyword{color:#c9c}@media screen and (max-width:479px){#mobile-nav{position:absolute;top:0;left:0;width:280px;height:100%;background:#191919;border-right:1px solid #fff}}@media screen and (max-width:479px){.mobile-nav-link{display:block;color:#999;text-decoration:none;padding:15px 20px;font-weight:700}.mobile-nav-link:hover{color:#fff}}@media screen and (min-width:768px){#sidebar{display:inline;float:left;width:23.333333333333332%;margin:0 .833333333333333%}}.widget-wrap{margin:90px 0}.widget-title{color:#000;text-transform:none}.widget{color:#000;text-shadow:0 0 #fff;background:#fff;border:1px solid #fff;padding:15px;border-radius:3px}.widget a{color:#103ffb;text-decoration:none}.widget a:hover{text-decoration:underline}.widget dl dl,.widget dl ol,.widget dl ul,.widget ol dl,.widget ol ol,.widget ol ul,.widget ul dl,.widget ul ol,.widget ul ul{margin-left:15px;list-style:disc}.widget{line-height:1.6em;word-wrap:break-word;font-size:.9em}.widget ol,.widget ul{list-style:none;margin:0}.widget ol ol,.widget ol ul,.widget ul ol,.widget ul ul{margin:0 20px}.widget ol ul,.widget ul ul{list-style:disc}.widget ol ol,.widget ul ol{list-style:decimal}.archive-list-count,.category-list-count,.tag-list-count{padding-left:5px;color:#999;font-size:.85em}.archive-list-count:before,.category-list-count:before,.tag-list-count:before{content:"("}.archive-list-count:after,.category-list-count:after,.tag-list-count:after{content:")"}.tagcloud a{margin-right:5px;display:inline-block}</style>
</head>
<body>
  <a href="https://blog.fundebug.com/2019/03/06/how-to-minimize-image-to-optimize-web-performance/">Web 性能优化： 图片优化让网站大小减少 62%</a>
  <article id="post-2019/03/06/how-to-minimize-image-to-optimize-web-performance" class="article article-type-post" itemscope="" itemprop="blogPost"><div class="article-meta"><time datetime="2019-03-06T02:00:00.000Z" itemprop="datePublished"><a href="/2019/03/06/how-to-minimize-image-to-optimize-web-performance/" class="article-date">2019-03-06</a></time><ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/前端/">前端</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/转载/">转载</a></li></ul></div><div class="article-inner"><header class="article-header"><h1 class="article-title" itemprop="name"><a href="/2019/03/06/how-to-minimize-image-to-optimize-web-performance/">Web 性能优化： 图片优化让网站大小减少 62%</a></h1></header><div class="article-entry" itemprop="articleBody"><p><strong>摘要：</strong> 压缩各种格式的图片。</p><a id="more"></a><ul><li>原文：<a href="https://segmentfault.com/a/1190000018392559" target="_blank" rel="noopener">Web 性能优化： 图片优化让网站大小减少 62%</a></li><li>作者：<a href="https://segmentfault.com/a/1190000017794020" target="_blank" rel="noopener">前端小智</a></li></ul><p><strong><a href="https://www.fundebug.com/" target="_blank" rel="noopener">Fundebug</a>经授权转载，版权归原作者所有。</strong></p><p>这是 Web 性能优化的第二篇，上一篇在下面看点击查看：</p><ul><li><a href="https://segmentfault.com/a/1190000018368885" target="_blank" rel="noopener">Web 性能优化： 使用 Webpack 分离数据的正确方法</a></li></ul><p>图像是 web 上提供的最基本的内容类型之一。他们说一张图片胜过千言万语。但是如果你不小心的话，图片大小有时高达几十兆。</p><p>因此，虽然网络图像需要清晰明快，但它们尺寸可以缩小压缩的，使用加载时间保持在可接受的水平。</p><p>在我的网站上，我注意到我的主页的页面大小 超过了 <strong>1.1MB</strong>，图片占了约 88%，我还注意到我提供的图像比它们需要的大(在分辨率方面)，显然，还有很多改进的空间。</p><p><a href="https://image.fundebug.com/2019-03-05-01.png" title="" class="fancybox" rel="article0"><img src="https://image.fundebug.com/2019-03-05-01.png" alt=""></a></p><p>我开始阅读 Addy Osmani 的优秀 <a href="https://images.guide/" target="_blank" rel="noopener">Essential Image Optimization</a>电子书，并开始在我的网站上按照他们的建议做了一些图片的优化。，然后再对响应式图像进行了一些研究并应用了它。</p><p>这使得页面大小减少到 <strong>445kb</strong>，约 <code>62%</code> !</p><p><a href="https://image.fundebug.com/2019-03-05-02.png" title="" class="fancybox" rel="article0"><img src="https://image.fundebug.com/2019-03-05-02.png" alt=""></a></p><h3 id="什么是图像压缩"><a href="#什么是图像压缩" class="headerlink" title="什么是图像压缩?"></a>什么是图像压缩?</h3><p>压缩图像就是在图片保持在可接受的清晰度范围内同时减少文件大小，我使用 <a href="https://github.com/imagemin/imagemin" target="_blank" rel="noopener">imagemin</a> 来压缩站点上的图像。</p><p>要使用 <code>imagemin</code>，确保你已经安装了 Node.js，然后打开一个终端窗口，<code>cd</code> 进入项目，并运行以下命令:</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm install imagemin</span><br></pre></td></tr></tbody></table></figure><p>然后创建一个名为 <code>imagemin.js</code> 的新文件，写入下面的内容：</p><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> imagemin = <span class="built_in">require</span>(<span class="string">"imagemin"</span>);</span><br><span class="line"><span class="keyword">const</span> PNGImages = <span class="string">"assets/images/*.png"</span>;</span><br><span class="line"><span class="keyword">const</span> JPEGImages = <span class="string">"assets/images/*.jpg"</span>;</span><br><span class="line"><span class="keyword">const</span> output = <span class="string">"build/images"</span>;</span><br></pre></td></tr></tbody></table></figure><p>你可以根据自己的需要更改 <code>PNGImages</code>、<code>JPEGImages</code> 和 <code>output</code> 的值，以符合你的项目结构。</p><p>此外要执行图片压缩，还需要根据要压缩的图像类型安装对应的插件。</p><h3 id="JPEG-JPG"><a href="#JPEG-JPG" class="headerlink" title="JPEG/JPG"></a>JPEG/JPG</h3><h4 id="JPG-的优点"><a href="#JPG-的优点" class="headerlink" title="JPG 的优点"></a>JPG 的优点</h4><p>JPG 最大的特点是 <strong>有损压缩</strong>。这种高效的压缩算法使它成为了一种非常轻巧的图片格式。另一方面，即使被称为“有损”压缩，JPG 的压缩方式仍然是一种高质量的压缩方式：当我们把图片体积压缩至原有体积的 50% 以下时，JPG 仍然可以保持住 60% 的品质。此外，JPG 格式以 24 位存储单个图，可以呈现多达 1600 万种颜色，足以应对大多数场景下对色彩的要求，这一点决定了它压缩前后的质量损耗并不容易被我们人类的肉眼所察觉——前提是你用对了业务场景。</p><h4 id="JPG-使用场景"><a href="#JPG-使用场景" class="headerlink" title="JPG 使用场景"></a>JPG 使用场景</h4><p>JPG 适用于呈现色彩丰富的图片，在我们日常开发中，JPG 图片经常作为大的背景图、轮播图或 Banner 图出现。</p><h4 id="JPG-的缺陷"><a href="#JPG-的缺陷" class="headerlink" title="JPG 的缺陷"></a>JPG 的缺陷</h4><p>有损压缩在上文所展示的轮播图上确实很难露出马脚，但当它处理矢量图形和 Logo 等线条感较强、颜色对比强烈的图像时，人为压缩导致的图片模糊会相当明显。</p><p>此外，JPEG 图像不支持透明度处理，透明图片需要召唤 PNG 来呈现。</p><h4 id="使用-MozJPEG-压缩-jpeg"><a href="#使用-MozJPEG-压缩-jpeg" class="headerlink" title="使用 MozJPEG 压缩 jpeg"></a>使用 MozJPEG 压缩 jpeg</h4><p>这里使用 Mozilla 的 <a href="https://github.com/mozilla/mozjpeg" target="_blank" rel="noopener">MozJPEG</a> 工具，该工具可以通过 <a href="https://www.npmjs.com/package/imagemin-mozjpeg" target="_blank" rel="noopener">imagemin-mozjpeg</a> 作为 Imagemin 插件使用。你可以通过运行以下命令来安装它:</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm install imagemin-mozjpeg</span><br></pre></td></tr></tbody></table></figure><p>然后将以下内容添加到的 <code>imagemin.js</code> 中:</p><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> imageminMozjpeg = <span class="built_in">require</span>(<span class="string">"imagemin-mozjpeg"</span>);</span><br><span class="line"><span class="keyword">const</span> optimiseJPEGImages = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">    imagemin([JPEGImages], output, {</span><br><span class="line">        plugins: [</span><br><span class="line">            imageminMozjpeg({</span><br><span class="line">                quality: <span class="number">70</span></span><br><span class="line">            })</span><br><span class="line">        ]</span><br><span class="line">    });</span><br><span class="line">optimiseJPEGImages().catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(error));</span><br></pre></td></tr></tbody></table></figure><p>可以通过在终端中运行 <code>node imagemin.js</code> 来运行脚本。这将处理所有 JPEG 图像，并将优化后的版本放 <code>build/images</code> 文件夹中。</p><p>我发现将 <code>quality</code> 设置为 70 在大多数情况下可以产生足够清晰的图像，但你的项目需求可能不同，可以自行设置合适的值。</p><p>默认情况下，MozJPEG <a href="https://cloudinary.com/blog/progressive_jpegs_and_green_martians" target="_blank" rel="noopener">生成渐进式 jpeg</a>，这会导致图像从低分辨率逐渐加载到高分辨率，直到图片完全加载为止。由于它们的编码方式，它们也比原始的 jpeg 略小。</p><p>你可以使用 Sindre Sorhus 提供的这个<a href="https://www.npmjs.com/package/is-progressive-cli" target="_blank" rel="noopener">命令行工具</a>来检查 JPEG 图像是否是渐进式的。</p><p>Addy Osmani 已经很好地总结了使用渐进式 jpeg 的<a href="https://images.guide/#the-advantages-of-progressive-jpegs" target="_blank" rel="noopener">优缺点</a>。对我来说，我觉得利大于弊，所以我坚持使用默认设置。</p><p>如果你更喜欢使用原始的 jpeg，可以在 <code>options</code> 对象中将 <code>progressive</code> 设置为 fa<code>l</code>se。另外，请确保 <a href="https://www.npmjs.com/package/imagemin-mozjpeg" target="_blank" rel="noopener">imagemin-mozjpeg</a>版本的变化，请重新查看对应文档。</p><h3 id="PNG-PNG-8-与-PNG-24"><a href="#PNG-PNG-8-与-PNG-24" class="headerlink" title="PNG (PNG-8 与 PNG-24)"></a>PNG (PNG-8 与 PNG-24)</h3><h4 id="PNG-的优缺点"><a href="#PNG-的优缺点" class="headerlink" title="PNG 的优缺点"></a>PNG 的优缺点</h4><p>PNG（可移植网络图形格式）是一种无损压缩的高保真的图片格式。8 和 24，这里都是二进制数的位数。按照我们前置知识里提到的对应关系，8 位的 PNG 最多支持 256 种颜色，而 24 位的可以呈现约 1600 万种颜色。</p><p>PNG 图片具有比 JPG 更强的色彩表现力，对线条的处理更加细腻，对透明度有良好的支持。它弥补了上文我们提到的 JPG 的局限性，唯一的缺点就是　<strong>体积太大</strong>。</p><h4 id="PNG-应用场景"><a href="#PNG-应用场景" class="headerlink" title="PNG 应用场景"></a>PNG 应用场景</h4><p>前面我们提到，复杂的、色彩层次丰富的图片，用 PNG 来处理的话，成本会比较高，我们一般会交给 JPG 去存储。</p><p>考虑到 PNG 在处理线条和颜色对比度方面的优势，我们主要用它来呈现小的 Logo、颜色简单且对比强烈的图片或背景等。</p><h4 id="使用-pngquant-优化-PNG-图像"><a href="#使用-pngquant-优化-PNG-图像" class="headerlink" title="使用 pngquant 优化 PNG 图像"></a>使用 pngquant 优化 PNG 图像</h4><p><a href="https://pngquant.org/" target="_blank" rel="noopener">pngquant</a> 是我优化 PNG 图像的首选工具，你可以通过 <a href="https://www.npmjs.com/package/imagemin-pngquant" target="_blank" rel="noopener">imagemin-pngquant</a> 使用它:</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm install imagemin-pngquant</span><br></pre></td></tr></tbody></table></figure><p>然后将以下内容添加到 <code>imagemin.js</code> 文件中:</p><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> imageminPngquant = <span class="built_in">require</span>(<span class="string">"imagemin-pngquant"</span>);</span><br><span class="line"><span class="keyword">const</span> optimisePNGImages = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">    imagemin([PNGImages], output, {</span><br><span class="line">        plugins: [imageminPngquant({ <span class="attr">quality</span>: <span class="string">"65-80"</span> })]</span><br><span class="line">    });</span><br><span class="line">optimiseJPEGImages()</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> optimisePNGImages())</span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(error));</span><br></pre></td></tr></tbody></table></figure><p>我发现将 <code>quality</code> 设置为 <code>65-80</code> 可以在文件大小和图像质量之间较好的折衷方案。</p><p>有了这些设置，我可以得到一个屏幕截图，我的网站从 913kb 到 187kb，没有任何明显的视觉损失，<strong>惊人的 79% 的降幅!</strong></p><p>这是两个文件。看一看，自己判断一下:</p><ul><li><a href="https://freshman.tech/assets/dist/images/articles/freshman-1600-original.png" target="_blank" rel="noopener">原图(913kb)</a></li><li><a href="https://freshman.tech/assets/dist/images/articles/freshman-1600.png" target="_blank" rel="noopener">优化后的图像(187kb)</a></li></ul><p><strong>代码部署后可能存在的 BUG 没法实时知道，事后为了解决这些 BUG，花了大量的时间进行 log 调试，这边顺便给大家推荐一个好用的 BUG 监控工具 <a href="https://www.fundebug.com/?utm_source=xiaozhi" target="_blank" rel="noopener">Fundebug</a>。</strong></p><h3 id="WebP"><a href="#WebP" class="headerlink" title="WebP"></a>WebP</h3><h4 id="WebP-的优点"><a href="#WebP-的优点" class="headerlink" title="WebP 的优点"></a>WebP 的优点</h4><p>WebP 像 JPEG 一样对细节丰富的图片信手拈来，像 PNG 一样支持透明，像 GIF 一样可以显示动态图片——它集多种图片文件格式的优点于一身。<br>WebP 的官方介绍对这一点有着更权威的阐述：</p><blockquote><p>与 PNG 相比，WebP 无损图像的尺寸缩小了 26％。在等效的 SSIM 质量指数下，WebP 有损图像比同类 JPEG 图像小 25-34％。 无损 WebP 支持透明度（也称为 alpha 通道），仅需 22％ 的额外字节。对于有损 RGB 压缩可接受的情况，有损 WebP 也支持透明度，与 PNG 相比，通常提供 3 倍的文件大小。</p></blockquote><h4 id="将-WebP-图像提供给支持它们的浏览器"><a href="#将-WebP-图像提供给支持它们的浏览器" class="headerlink" title="将 WebP 图像提供给支持它们的浏览器"></a>将 WebP 图像提供给支持它们的浏览器</h4><p><a href="https://developers.google.com/speed/webp/" target="_blank" rel="noopener">WebP</a> 是谷歌引入的一种相对较新的格式，它的目标是通过以无损和有损格式编码图像来提供更小的文件大小，使其成为 JPEG 和 PNG 的一个很好的替代方案。</p><p>WebP 图像的清晰度通常可以与 JPEG 和 PNG 相提并论，而且文件大小要小得多。例如，当我将屏幕截图从上面转换到 WebP 时，我得到了一个 88kb 的文件，其质量与 913kb 的原始图像相当，<strong>减少了 90% !</strong></p><p>看看这三张图片，你能说出区别吗?</p><ul><li><a href="https://freshman.tech/assets/dist/images/articles/freshman-1600-original.png" target="_blank" rel="noopener">原图 PNG (913kb)</a></li><li><a href="https://freshman.tech/assets/dist/images/articles/freshman-1600.png" target="_blank" rel="noopener">优化 PNG 图像(187kb)</a></li><li><a href="https://freshman.tech/assets/dist/images/articles/freshman-1600.webp" target="_blank" rel="noopener">WebP 图像(88kb，可在 Chrome 或 Opera 浏览器中浏览)</a></li></ul><p>就我个人而言，我认为视觉效果是可以比较的，而且节省下来的大小是不容忽视的。</p><p>既然我们已经认识到在可能的情况下使用 WebP 格式是有价值的，那么很重要的一点是—它不能完全替代 JPEG 和 PNG，因为浏览器对 WebP 支持并不普遍。</p><p>在撰写本文时，Firefox、Safari 和 Edge 都是不支持 WebP 的浏览器。</p><p><a href="https://image.fundebug.com/2019-03-05-03.png" title="" class="fancybox" rel="article0"><img src="https://image.fundebug.com/2019-03-05-03.png" alt=""></a></p><p>然而，根据 <a href="https://caniuse.com/#search=WebP" target="_blank" rel="noopener">caniuse.com</a> 的数据，全球超过 70%的用户使用支持 WebP 的浏览器。这意味着，通过使用 WebP 图像，可以为大约 70% 的客户提供更快的 web 页面及更好的体验。</p><p>安装它，运行以下命令：</p><figure class="highlight bash"><table><tbody><tr><td class="code"><pre><span class="line">npm install imagemin-webp</span><br></pre></td></tr></tbody></table></figure><p>然后将以下内容添加到你的 <code>imagemin.js</code> 文件中:</p><figure class="highlight javascript"><table><tbody><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> imageminWebp = <span class="built_in">require</span>(<span class="string">"imagemin-webp"</span>);</span><br><span class="line"><span class="keyword">const</span> convertPNGToWebp = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">    imagemin([PNGImages], output, {</span><br><span class="line">        use: [</span><br><span class="line">            imageminWebp({</span><br><span class="line">                quality: <span class="number">85</span></span><br><span class="line">            })</span><br><span class="line">        ]</span><br><span class="line">    });</span><br><span class="line"><span class="keyword">const</span> convertJPGToWebp = <span class="function"><span class="params">()</span> =&gt;</span></span><br><span class="line">    imagemin([JPGImages], output, {</span><br><span class="line">        use: [</span><br><span class="line">            imageminWebp({</span><br><span class="line">                quality: <span class="number">75</span></span><br><span class="line">            })</span><br><span class="line">        ]</span><br><span class="line">    });</span><br><span class="line">optimiseJPEGImages()</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> optimisePNGImages())</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> convertPNGToWebp())</span><br><span class="line">    .then(<span class="function"><span class="params">()</span> =&gt;</span> convertJPGToWebp())</span><br><span class="line">    .catch(<span class="function"><span class="params">error</span> =&gt;</span> <span class="built_in">console</span>.log(error));</span><br></pre></td></tr></tbody></table></figure><p>我发现，将 <code>quality</code> 设置为 <code>85</code> 会生成质量与 PNG 相当但小得多的 WebP 图像。对于 jpeg，我发现将 <code>quality</code> 设置为 <code>75</code> 可以在视觉和文件大小之间取得很好的平衡。</p><h3 id="提供-HTML-格式的-WebP-图像"><a href="#提供-HTML-格式的-WebP-图像" class="headerlink" title="提供 HTML 格式的 WebP 图像"></a>提供 HTML 格式的 WebP 图像</h3><p>一旦有了 WebP 图像，可以使用以下标记将它们提供给可以使用它们的浏览器，同时向不兼容 WebP 的浏览器使用 png 或者 jpeg。</p><figure class="highlight html"><table><tbody><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">picture</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">srcset</span>=<span class="string">"sample_image.webp"</span> <span class="attr">type</span>=<span class="string">"image/webp"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">source</span> <span class="attr">srcset</span>=<span class="string">"sample_image.jpg"</span> <span class="attr">type</span>=<span class="string">"image/jpg"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"sample_image.jpg"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">picture</span>&gt;</span></span><br></pre></td></tr></tbody></table></figure><p>使用此标记，理解 <code>image/webp</code> 媒体类型的浏览器将下载 Webp 图片并显示它，而其他浏览器将下载 JPEG 图片。</p><p>任何不支持 <code>&lt;picture&gt;</code> 的浏览器都将跳过所有 <code>source</code> 标签，并加载底部 <code>img</code> 标签。因此，我们通过提供对所有浏览器类的支持，逐步增强了我们的页面。</p><p><a href="https://image.fundebug.com/2019-03-05-04.png" title="" class="fancybox" rel="article0"><img src="https://image.fundebug.com/2019-03-05-04.png" alt=""></a></p><p>请注意，在所有情况下，img 标记都是实际呈现给页面的内容，因此它确实是语法的必需部分。 如果省略 img 标记，则不会渲染任何图像。</p><p><picture>标签和其中定义的所有 <code>source</code> 都在那里，以便浏览器可以选择要使用的图片的路径。 选择源图像后，其 URL 将传给 img 标记，这就是显示的内容。</picture></p><p>这意味着你无需设置 <code>&lt;picture&gt;</code> 或 <code>source</code> 标记的样式，因为浏览器不会渲染这些标记。 因此，你可以像以前一样继续使用 <code>img</code> 标签进行样式设置。</p><h3 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h3><p>正如你所看到的，优化 web 上使用的图像的过程并不复杂，通过减少页面加载时间，可以为客户带来更好的用户体验，希望本文对你有所帮助，共进步！</p><p><strong>原文：<a href="https://medium.freecodecamp.org/image-optimization-558d9f449e3" target="_blank" rel="noopener">How Image Optimization Decreased my Website’s Page Weight by 62%</a></strong></p><div><h3>关于Fundebug</h3><p><a href="https://www.fundebug.com/">Fundebug</a>专注于JavaScript、微信小程序、微信小游戏、支付宝小程序、React Native、Node.js和Java线上应用实时BUG监控。 自从2016年双十一正式上线，Fundebug累计处理了10亿+错误事件，付费客户有阳光保险、核桃编程、荔枝FM、掌门1对1、微脉、青团社等众多品牌企业。欢迎大家<a href="https://www.fundebug.com/team/create">免费试用</a>！</p></div><div><a href="https://static.fundebug.cn/wechat_slogan.png" title="" class="fancybox" rel="article0"><img style="width:50%" src="https://static.fundebug.cn/wechat_slogan.png"></a></div><div><h3>版权声明</h3>转载时请注明作者<b><a href="https://blog.fundebug.com" target="_blank" title="Fundebug"> Fundebug</a></b>以及本文地址：<br><b><a href="https://blog.fundebug.com/2019/03/06/how-to-minimize-image-to-optimize-web-performance/" target="_blank" title="Web 性能优化： 图片优化让网站大小减少 62%">https://blog.fundebug.com/2019/03/06/how-to-minimize-image-to-optimize-web-performance/</a></b></div><div style="text-align:center;height:115px;margin-bottom:15px;background-color:#f7f5fa;border-top-left-radius:.4rem;border-top-right-radius:.4rem;border-bottom-left-radius:.4rem;border-bottom-right-radius:.4rem"><p style="margin-top:20px;margin-bottom:20px;padding-top:20px;font-size:18px">您的用户遇到BUG了吗？</p><a href="https://www.fundebug.com/demo" style="margin-right:20px;padding:8px 16px;background:#22a985;color:#fff;border-radius:3px;font-size:16px">体验Demo</a> <a href="https://www.fundebug.com/team/create" style="margin-left:20px;padding:8px 22px;background:#22a985;color:#fff;border-radius:3px;font-size:16px">免费使用</a></div><style>.copyright *{box-sizing:border-box}</style></div></div></article>
</body>
</html>